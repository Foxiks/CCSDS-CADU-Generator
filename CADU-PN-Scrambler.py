import bitstring
import argparse
parser = argparse.ArgumentParser()
parser.add_argument("-o", "--output", help="Output binary CADU file name")
parser.add_argument("-i", "--input", help="Input binary CADU file name")
args = parser.parse_args()
inputfile = args.input
outfile = args.output
a = '111111110100100000001110110000001001101000001101011100001011110010001110001011001001001110101101101001111011011101000110110011100101101010010111011111011100110000110010101000101011111100111110000010100001000011110001100010001001010011001101111010101011000111111110100100000001110110000001001101000001101011100001011110010001110001011001001001110101101101001111011011101000110110011100101101010010111011111011100110000110010101000101011111100111110000010100001000011110001100010001001010011001101111010101011000111111110100100000001110110000001001101000001101011100001011110010001110001011001001001110101101101001111011011101000110110011100101101010010111011111011100110000110010101000101011111100111110000010100001000011110001100010001001010011001101111010101011000111111110100100000001110110000001001101000001101011100001011110010001110001011001001001110101101101001111011011101000110110011100101101010010111011111011100110000110010101000101011111100111110000010100001000011110001100010001001010011001101111010101011000111111110100100000001110110000001001101000001101011100001011110010001110001011001001001110101101101001111011011101000110110011100101101010010111011111011100110000110010101000101011111100111110000010100001000011110001100010001001010011001101111010101011000111111110100100000001110110000001001101000001101011100001011110010001110001011001001001110101101101001111011011101000110110011100101101010010111011111011100110000110010101000101011111100111110000010100001000011110001100010001001010011001101111010101011000111111110100100000001110110000001001101000001101011100001011110010001110001011001001001110101101101001111011011101000110110011100101101010010111011111011100110000110010101000101011111100111110000010100001000011110001100010001001010011001101111010101011000111111110100100000001110110000001001101000001101011100001011110010001110001011001001001110101101101001111011011101000110110011100101101010010111011111011100110000110010101000101011111100111110000010100001000011110001100010001001010011001101111010101011000111111110100100000001110110000001001101000001101011100001011110010001110001011001001001110101101101001111011011101000110110011100101101010010111011111011100110000110010101000101011111100111110000010100001000011110001100010001001010011001101111010101011000111111110100100000001110110000001001101000001101011100001011110010001110001011001001001110101101101001111011011101000110110011100101101010010111011111011100110000110010101000101011111100111110000010100001000011110001100010001001010011001101111010101011000111111110100100000001110110000001001101000001101011100001011110010001110001011001001001110101101101001111011011101000110110011100101101010010111011111011100110000110010101000101011111100111110000010100001000011110001100010001001010011001101111010101011000111111110100100000001110110000001001101000001101011100001011110010001110001011001001001110101101101001111011011101000110110011100101101010010111011111011100110000110010101000101011111100111110000010100001000011110001100010001001010011001101111010101011000111111110100100000001110110000001001101000001101011100001011110010001110001011001001001110101101101001111011011101000110110011100101101010010111011111011100110000110010101000101011111100111110000010100001000011110001100010001001010011001101111010101011000111111110100100000001110110000001001101000001101011100001011110010001110001011001001001110101101101001111011011101000110110011100101101010010111011111011100110000110010101000101011111100111110000010100001000011110001100010001001010011001101111010101011000111111110100100000001110110000001001101000001101011100001011110010001110001011001001001110101101101001111011011101000110110011100101101010010111011111011100110000110010101000101011111100111110000010100001000011110001100010001001010011001101111010101011000111111110100100000001110110000001001101000001101011100001011110010001110001011001001001110101101101001111011011101000110110011100101101010010111011111011100110000110010101000101011111100111110000010100001000011110001100010001001010011001101111010101011000111111110100100000001110110000001001101000001101011100001011110010001110001011001001001110101101101001111011011101000110110011100101101010010111011111011100110000110010101000101011111100111110000010100001000011110001100010001001010011001101111010101011000111111110100100000001110110000001001101000001101011100001011110010001110001011001001001110101101101001111011011101000110110011100101101010010111011111011100110000110010101000101011111100111110000010100001000011110001100010001001010011001101111010101011000111111110100100000001110110000001001101000001101011100001011110010001110001011001001001110101101101001111011011101000110110011100101101010010111011111011100110000110010101000101011111100111110000010100001000011110001100010001001010011001101111010101011000111111110100100000001110110000001001101000001101011100001011110010001110001011001001001110101101101001111011011101000110110011100101101010010111011111011100110000110010101000101011111100111110000010100001000011110001100010001001010011001101111010101011000111111110100100000001110110000001001101000001101011100001011110010001110001011001001001110101101101001111011011101000110110011100101101010010111011111011100110000110010101000101011111100111110000010100001000011110001100010001001010011001101111010101011000111111110100100000001110110000001001101000001101011100001011110010001110001011001001001110101101101001111011011101000110110011100101101010010111011111011100110000110010101000101011111100111110000010100001000011110001100010001001010011001101111010101011000111111110100100000001110110000001001101000001101011100001011110010001110001011001001001110101101101001111011011101000110110011100101101010010111011111011100110000110010101000101011111100111110000010100001000011110001100010001001010011001101111010101011000111111110100100000001110110000001001101000001101011100001011110010001110001011001001001110101101101001111011011101000110110011100101101010010111011111011100110000110010101000101011111100111110000010100001000011110001100010001001010011001101111010101011000111111110100100000001110110000001001101000001101011100001011110010001110001011001001001110101101101001111011011101000110110011100101101010010111011111011100110000110010101000101011111100111110000010100001000011110001100010001001010011001101111010101011000111111110100100000001110110000001001101000001101011100001011110010001110001011001001001110101101101001111011011101000110110011100101101010010111011111011100110000110010101000101011111100111110000010100001000011110001100010001001010011001101111010101011000111111110100100000001110110000001001101000001101011100001011110010001110001011001001001110101101101001111011011101000110110011100101101010010111011111011100110000110010101000101011111100111110000010100001000011110001100010001001010011001101111010101011000111111110100100000001110110000001001101000001101011100001011110010001110001011001001001110101101101001111011011101000110110011100101101010010111011111011100110000110010101000101011111100111110000010100001000011110001100010001001010011001101111010101011000111111110100100000001110110000001001101000001101011100001011110010001110001011001001001110101101101001111011011101000110110011100101101010010111011111011100110000110010101000101011111100111110000010100001000011110001100010001001010011001101111010101011000111111110100100000001110110000001001101000001101011100001011110010001110001011001001001110101101101001111011011101000110110011100101101010010111011111011100110000110010101000101011111100111110000010100001000011110001100010001001010011001101111010101011000111111110100100000001110110000001001101000001101011100001011110010001110001011001001001110101101101001111011011101000110110011100101101010010111011111011100110000110010101000101011111100111110000010100001000011110001100010001001010011001101111010101011000111111110100100000001110110000001001101000001101011100001011110010001110001011001001001110101101101001111011011101000110110011100101101010010111011111011100110000110010101000101011111100111110000010100001000011110001100010001001010011001101111010101011000'
mask = int(a, 2)
n = 0
with open(str(inputfile), 'rb') as file:
    d = bitstring.ConstBitStream(file)
while True:
    s = d.read(32).bin
    data = d.read(8160).uint
    cut = int(8160)-int(len(str(bin(int(mask)^int(data)))[2:]))
    with open(str(outfile), 'ab') as out:
        bitstring.BitArray(bin=str(s)+str('0'*cut)+str(bin(int(mask)^int(data)))[2:]).tofile(out)
    n+=1
    print('Frames: '+str(n))